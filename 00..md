# 01
Por mucho tiempo hemos manejado el estado de nuestras aplicaciones mirándolo siempre con el mismo prisma. Hemos considerado todo el estado como un igual, uniforme y único.

¿Pero? ¿Qué ocurre si de pronto, miramos de cerca y vemos que en realidad no es así?

# 02
Que todos es en efecto un estado pero cada uno tiene su propia historia, origen y forma? Que cada uno es una variante?

# 03
** Las Naturalezas del Estado y Como Domarlas **

# 06 ¿Qué es el estado?

Para comenzar, debemos conocer a nuestro sospechoso. **¿Qué es el estado?**

Báicamente, son datos que cambian en el tiempo, y cuando el tiempo es parte de las variables que tenemos que manejar, todo se complica.

El estado es una estructura de datos que representa una "fotografía" de la realidad de nuestra aplicación. O una representación programática de lo que el usuario ve en ese momento.

Y por que nos importa hablar de estado? Por que nuestras aplicaciones son interactivas, lo que se muestra en pantalla no es estático

Nuestas aplicaciones son mayormente interfaces de usuario creadas con ciertas opiones con el fin de consumir y manipular datos.

> El estado es la expectativa que tiene el usuario de cómo debe funcionar la aplicación, esto es parte de la batalla constante que libramos al agregar estado a las aplicaciones. "¿Lo que ve el usuario es exactamente uno a uno con lo que el estado representa internamente?".

# ¿Que buscamos resolver?

Administrar el estado es un problema conocido en la ciencia de la computación, hay una gran rama de investigación que creó un concepto llamado máquinas de estados finitos, un modelo matemático que representa una "máquina" que puede estar exactamente en uno de un número finito de estados en cualquier hora. La máquina puede pasar a un estado u otro en respuesta a algunas entradas.

![Screen Shot 2021-07-11 at 09.28.04.png](https://res.craft.do/user/full/0a4fa0f6-6e08-58de-6dbc-6c56902ee35d/3632E1D4-D988-4172-A7EB-FF31DE85A37C_2/Screen%20Shot%202021-07-11%20at%2009.28.04.png)

## ¿Cuales son las entradas o eventos en nuestras app?

Nuestras aplicaciones web pueden tener variados puntos de "entradas" o eventos a los que deben reaccionar, todas estas fuentes crean finalmente modificaciones en el estado incluso integrando nuevos datos dentro de ese estado.

¿Que fuentes podemos identificar?

- Eventos de usuario
- Cambios en la url
- Cambios en un formulario
- Cambios en los datos del servidor

# ¿Y como formamos nuestro estado?

Como mencione antes, el estado tiene diferentes "historias", formas en que fue generado lo que nos da diferentes estados bastante relacionado con las fuentes de generación

- UI State – State used for controlling interactive parts of our application (e.g. dark mode toggle, modals).
- Server Cache State – State from the server, which we cache on the client-side for quick access (e.g. call an API, store the result, use it in multiple places).
- Form State – The many different states of a form (e.g. loading, submitting, disabled, validation, retrying). There's also [controlled & uncontrolled form state](https://reactjs.org/docs/forms.html).
- URL State – State managed by the browser (e.g. filter products, saving to query parameters, and refreshing the page to see the same products filtered)
- State Machine – An explicit model of your state over time (e.g. a stoplight goes from green → yellow → red, but never green → red).

# Hasta ahora, como hemos manejado el estado de nuestras app?

Que significa "manejar el estado".

Básicamente almacenar, actualizar y agregar datos que serán representados por la interfaz

Existen muchas librerias cuyo objetivo es proporcionar medios, herramientas y patrones para manejar el estado pero en general todas caen en una solución particular: **Estado Global.**

Un patrón dedicado a consumir y manejar datos asíncronos sin diferenciar de donde proviene ese estado: Datos de usuario, servidor o API

- Es super conviente
- Evitamos prop drilling
- Permite acceder a los datos desde cualquier lugar
- no necesitas copiar ni duplicar
- la idea es que puedas ser más productivo haciendo menos.

```javascript
const globalState = {
	theme: 'dark',
	currentUser: {
		userName: '@matiasfha',
		email: 'hola@matiashernandez.dev'
		site: 'https://matiashernandez.dev',
		profile: {...}
	},
	userSettings: {...}
	users: {...}
	articles: {...}		
}

function App() {
    const { currentUser } = globalState
    const updateTheme = (theme)=> {
        globalState.theme = theme
    }
    return ....
}

function ComponenteAnidado() {
    const { userSettings } = globalState
    return .-.-.
}
```

Crear un estado global es bastante sencillo, en React puedes simplemente usar la api Context

```javascript
/* src/context/global.jsx */
const GlobalContext = React.createContext()

function GlobalProvider({ children }) {
    // realizar los calculos o manipulaciones necesarias
    const [state, dispatch] = React.useReducer(reducer, initialState);
	...
	...
	...
	const value = { state, dispatch }
	return <GlobalContext.Provider value={{value}}>{children}</GlobalContext.Provider>
}

/* src/App.jsx */
function App() {

	return (
		<GlobalProvider>
			<NavBar />
			<MainContent />
			<Footer />
		</GlobalProvider>
	)
}

/* src/components/UserProfile.jsx */
const UserProfile = () => {
	const { user } = React.useContext(GlobalContext)
 	return (
		<div>{user.userName}</div>
	)
}
```

o utilizar algunos de las clásicas soluciones como Redux